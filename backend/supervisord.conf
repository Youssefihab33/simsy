[supervisord]
nodaemon=true ; Run supervisord in the foreground

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;" ; Command to start Nginx in foreground
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/nginx_error.log
stdout_logfile=/var/log/supervisor/nginx_access.log

[program:gunicorn]
# Command to start Gunicorn
# Adjust --workers based on your server's CPU cores (use this formula: num_of_cores * 2 + 1)
command=/usr/bin/gunicorn --workers 9 --bind 0.0.0.0:8000 simsy.wsgi:application
directory=/usr/src/app/simsy ; Working directory for Gunicorn
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/gunicorn_error.log
stdout_logfile=/var/log/supervisor/gunicorn_access.log
; user=www-data ; Optional: Run Gunicorn as a non-root user for security (requires creating the user)
